
# 새롭게 알게된 점

##  Docker란?
컨테이너 기술, 컨테이너를 생성하고 관리하기 위한 도구

> 코드 패키지, 해당 코드를 실행하는데 필요한 모든게 포함되어 있음

도커는 컨테이너와 같은 개념. <br>
한 컨테이너의 상품은 다른 컨테이너의 상품과 섞이지 않음. <br>
즉 statandalone으로 작동 <br>
컨테이너를 처리할수 있는 모든 선박이나 트럭에도 실을수 있다.

<b>결론적으로 도커는 컨테이너를 구축하는 도구</b> <br>
- 코드가 포함된 패키지들 보관 가능 
- 동일한 환경에서 동일한 어플리케이션 실행가능. 
- 도커가 실행되는 모든 곳에서 컨테이너를 가지고 올수 있음 
- 어플리케이션을 실행 할 추가도구를 설치할 필요가 없음.

## Docker가 왜 필요한가?
1. 운영/개발 환경 통일 <br>
dev에서는 잘되던게 prod에서는 환경,버전이 달라서 안될수도 있음. <br> 특정 버전을 도커 컨테이너에 넣어서 항상 해당 버전으로만 실행되도록 세팅.
2. 팀원들과 같은 개발환경 통일 
3. 여러 프로젝트에서 버전 충돌이슈 해결 <br>
작업중인 프로젝트에서 버전충돌로 패키지 재설치 및 전환 번거로움. <br> 
프로젝트별 패키지 버전을 컨테이너에 넣고, 프로젝트마다 컨테이너 생성하도록 세팅.
	
## VM(가상머신)과 Docker
> <b> 가상머신은 컴퓨터 내부의 컴퓨터</b> <br> 

host OS위에 가상의 OS를 올림
실제 우리 머신 위에 statandalone 컴퓨터를 올려서 가상머신 오버헤드 이슈.
매번 새로운 컴퓨터를 계속 설치해서 기존 머신의 메모리, CPU 등 리소스 낭비

 - 운영체제에 많은 영향
 - 디스크 공간 많이 차지하고, 속도도 느림
 - 공유 및 재구축 가능하지만 도커보단 까다로움
 - 앱에 필요한 것 이외에 컴퓨터 전체를 캡슐화 
	
> <b> 이런 문제를 해결해주는 도커 컨테이너 </b>

가상머신처럼 여러대의 머신을 설치하는게 아니라 <br>
도커엔진 설치하고, 도커엔진 기반으로 컨테이너를 가동
- OS와 시스템에 미치는 영향이 적음
- 최소한의 디스크 공간차지하고, 가볍고 빠름
- 이미지와 구성파일이 있어서 공유 및 재구축 쉬움
- 앱에 필요한 것만 캡슐화

## Docker설치와 Dockerfile
mac, windows에서는 docker toolbox, docker desktop 설치 <br>
linux는 도커엔진 지원해서, 직접 도커엔진 설치

<b>테스트 Dockerfile </b> <br>
node.js 어플리케이션을 실행하는 도커파일
- nodejs 기본 이미지로 사용
- 컨테이너 파일 시스템 내에 작업하고자 하는 디렉토리 지정
- package.json 파일을 작업 디렉토리에 복사
- npm install 명령 실행, 어플리케이션에 필요한 종속성 설치
- 나머지 코드들을 작업 디렉토리에 복사
- 3000포트를 외부로 노출 (컨테이너 외부에서 접근가능
- node 명령으로 app.mjs 실행하는 명령어 실행

도커파일로 이미지 생성
docker build .

이미지 기반으로 컨테이너 실행 <br>
docker run 이미지ID -p 3000:3000 <br>
이때 실행하려는 포트가 있어서 해당 포트도 publish <br>
로컬시스템의 로컬 호스트를 사용해서 컨테이너 대신 포트3000에서 애플리케이션 실행시킴


<hr>

#### 함께 보면 좋은 글
- [Docker(도커) 기본개념](https://pearlluck.tistory.com/119) 
- [[클라우드흐름 2] VM(Virtual Machine) VS Container](https://pearlluck.tistory.com/133)