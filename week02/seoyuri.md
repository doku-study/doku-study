# 정리 및 새롭게 알게된 점

## 이미지 & 컨테이너
- 컨테이너 : 
    - 작은패키지, 
    - 소프트웨어 실행유닛 존재, 실행
    - 이미지의 구체적인 실행 인스턴스
- 이미지 : 
    - 도커를 실행할 때 필요한 디졸버, 
    - 템플릿 컨테이너의 블루 프린트, 
    - 실제로 코드와 코드를 실행하는데 필요한 도구를 포함, 
    - 모든 설정 명령과 모든 코드가 포함된 공유 가능한 패키지
    - 하나의 이미지로 여러 컨테이너를 만들 수 있음

## 외부 이미지 사용 & 실행
- docker hub : 공식 이미지를 받아 사용가능
```
# 자동으로 docker hub에서 최신 이미지를 가져와 로컬머신에 다운로드 & 컨테이너 생성
docker run node 

# 전체 컨테이너 조회 
docker ps -a 

# 도커에게 컨테이너 내부에서 호스팅 머신으로 대화형 세션을 노출하고 싶다고 알림
docker run -it node 

# docker image 빌드
docker build .

# 도커
docker run -p 3000:80 이미지
```
- $ docker run 명령어를 통해 동일한 이미지로 여러 컨테이너 생성

## 이미지 레이어 이해하기
- 명령결과를 캐싱
- 레이어 기반 아키텍처
이미지는 명령어를 기반으로 간단하게 레이어 구성 -> 이미지가 잠기고 변경할 수 없음 -> 레이어는 캐싱

## 이미지 & 컨테이너 관리

### 컨테이너 중지 & 재시작 / attached & Detached 컨테이너 이해하기
```
# 디폴트 값
docker attatch(-a)

# '-d'를 사용하여 컨테이너를 다시 시작하지 않고 컨테이너에 연결 아래 명령어 필요
docker attach 컨테이너

# 로그보기
docker logs 컨테이너
docker logs -f 컨테이너 #실시간
```

### 인터렉티브 모드로 들어가기***
docker run -it
docker start -a -i

### 이미지 & 컨테이너 삭제하기
```
# 사용하지 않는 이미지 제거
docker image prune 
```

### 중지된 컨테이너 자동제거
```
# 컨테이너 올릴 때 사용하지 않으면 삭제한다는 옵션 추가
docker run -p 3000:80 -d --rm 컨테이너
```

### 작동배경 살펴보기 : 이미지검사
```
# 이미지 검사
docker image inspect 이미지
```

### 컨테이너에/컨테이너로 부터 파일 복사
```
# 이미지
docker cp '복사할 폴더 내 파일' '목적지(컨테이너 이름:/내부경로), 없는 경우 생성'
docker cp dummy/. boring_vaughan:/test
docker cp boring_vaughan:/test dummy # 반대도 가능
# 이미지를 다시작성하지 않고도 컨테이너 수정가능(잘 사용하지 않음)
```
### 이미지 공유하기
- 이미지가 있는 사람은 이미지를 기반으로 컨테이너를 만들 수 있음
- 이미지를 공유하는 두가지 방법
    - Dockerfile과 소스코드 공유
    - 빌드된 전체 이미지를 공유
### DockerHub에 이미지 push 하기
- 도커허브
    - 공식 이미지 저장소
    - 개인 repository에 비공개로 이미지 저장 가능
```
# 이미지명:태그
docker push academind/node-hello-world:태그

# 태그 기존 이미지의 이름 태그 변경 기존이미지명 -> 변경이미지명
docker tag node-demo:latest academind/node-hello-world:
```

- 개인 레지스트리에 공유 가능
    - 많은 공급자
    - 팀이나 개인만 소유가능


# 함께 이야기하고 싶은 점, 느낀점

- 사용하는데 무리없는 정도의 명령어만 알고 있었는데(이미지빌드, 컨테이너run 등) 이미지 레이어, attached & detached 등 새로운 개념과 명령어를 알수 있었다. 
- 다만 attached & detached 등은 아직 완벽히 이해하지 못한것 같아 스터디 전에 해당부분 강의를 한번 더 보고 가야겠다
- 사용하지 않는 이미지 한번에 삭제하기 꿀팁을 얻었다. 그동안은 하나하나 삭제했음..